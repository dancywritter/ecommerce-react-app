(this["webpackJsonpecommerce-app"]=this["webpackJsonpecommerce-app"]||[]).push([[0],{23:function(e,t,a){e.exports=a(40)},28:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),i=a.n(c),o=a(21),l=(a(28),a(9)),s=a(5),m=a(6),d=a(8),u=a(7),p=a(15);a(38);p.initializeApp({apiKey:"AIzaSyAvP3KGfVxKYhCuh3wqymQk6Q_VJwTR7KA",authDomain:"ecommerce-f3c03.firebaseapp.com",databaseURL:"https://ecommerce-f3c03.firebaseio.com",projectId:"ecommerce-f3c03",storageBucket:"ecommerce-f3c03.appspot.com",messagingSenderId:"581806217618",appId:"1:581806217618:web:386951a692c7d33811094b"});var g=p.storage();var f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).callShowItems=function(){e.setState({displayItems:!0,displayCart:!1})},e.callShowCart=function(){e.setState({displayCart:!0})},e.callAddItem=function(){e.setState({displayItems:!1,displayCart:!1})},e.addItemToState=function(t){t.qty=0,t.inCart=!1,e.db.collection("items").add(t).then((function(e){console.log("Product Added: ",e)})).catch((function(e){console.log("Error: ",e)})),e.setState({displayItems:!0})},e.deleteItemFromState=function(t){var a=e.state.items,n=e.db.collection("items").doc(a[t].id);a[t].inCart&&e.onDeleteProduct(t),n.delete().then((function(){console.log("Deleted Product from Database")})).catch((function(e){console.log("Error in Deleting product From Database",e)}))},e.addItemToCart=function(t){var a=e.state.items,n=e.db.collection("items").doc(a[t].id);console.log("ITEM",a[t].url),n.update({inCart:!0,qty:1}).then((function(){console.log("Product Added to Cart !")})).catch((function(e){console.log("Error in Adding product into Cart ".concat(e))}))},e.editItemFromState=function(t,a){var n=e.state.items;e.db.collection("items").doc(n[t].id).update(Object(l.a)(Object(l.a)({},n[t]),{},{name:a.newName,price:a.newPrice,star:a.newStar,description:a.newDescription})).then((function(){console.log("Updated Sucessfully")})).catch((function(e){console.log("Error in updating Product :",e)}))},e.onIncreasQuantity=function(t){var a=e.state.items;e.db.collection("items").doc(a[t].id).update({qty:a[t].qty+1}).then((function(){console.log("Updated Sucessfully")})).catch((function(e){console.log("Error i updating Product :",e)}))},e.onDecreaseQuantity=function(t){var a=e.state.items;a[t].qty<=0||e.db.collection("items").doc(a[t].id).update({qty:a[t].qty-1}).then((function(){console.log("Updated Sucessfully")})).catch((function(e){console.log("Error i updating Product :",e)}))},e.onDeleteProduct=function(t){var a=e.state.items;e.db.collection("items").doc(a[t].id).update({inCart:!1,qty:0}).then((function(){console.log("Removed From Cart Sucessfully")})).catch((function(e){console.log("Error in removing Product from Cart:",e)}))},e.ascendingOrder=function(){var t=e.props.store.getState().products;t.sort((function(e,t){return e.price-t.price})),e.props.store.dispatch(function(e){return{type:"ASS_ORDER",products:e}}(t))},e.descendingOrder=function(){var t=e.props.store.getState().products;t.sort((function(e,t){return t.price-e.price})),e.props.store.dispatch(function(e){return{type:"DES_ORDER",products:e}}(t))},e.TotalItemInCart=function(){var t=0;return e.state.items.forEach((function(e){t+=e.qty})),t},e.TotalItemInCartPrice=function(){var t=0;return e.state.items.forEach((function(e){t+=e.qty*e.price})),t},e.state={items:[],displayItems:!0,displayCart:!1,loading:!0},e.db=p.firestore(),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store;t.subscribe((function(){console.log("UPDATED"),e.forceUpdate()})),this.db.collection("items").onSnapshot((function(a){var n=a.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.dispatch({type:"FETCH_PRODUCT",products:n}),e.setState({items:n,loading:!1})}))}},{key:"render",value:function(){var e=this;console.log("State:",this.props.store.getState());var t=this.props.store.getState().products,a=this.state,n=a.displayItems,c=a.displayCart,i=a.loading;return r.a.createElement("div",{className:"App"},r.a.createElement(P,{getItemCount:this.TotalItemInCart(),getTotalMRP:this.TotalItemInCartPrice(),callShowItems:this.callShowItems,callAddItem:this.callAddItem,callShowCart:this.callShowCart}),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"order"},r.a.createElement("h4",null,"Sort:"),r.a.createElement("button",{onClick:this.ascendingOrder},"ascending"),r.a.createElement("button",{onClick:this.descendingOrder},"descending")),c?t.map((function(t,a){return t.inCart?r.a.createElement(k,{key:a,index:a,item:t,onIncreasQuantity:e.onIncreasQuantity,onDecreaseQuantity:e.onDecreaseQuantity,onDeleteProduct:e.onDeleteProduct}):r.a.createElement("br",{index:a})})):n?t.map((function(t,a){return r.a.createElement(x,{key:a,index:a,item:t,deleteItemFromState:e.deleteItemFromState,editItemFromState:e.editItemFromState,addItemToCart:e.addItemToCart})})):r.a.createElement(S,{addItemToState:this.addItemToState})),i&&r.a.createElement("h1",null," Loading Products..."))}}]),a}(r.a.Component),h=a(14),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChangeForImage=function(t){if(t.target.files[0]){var a=t.target.files[0];e.setState((function(){return{image:a}}))}},e.handleImageUpload=function(){var t=e.state.image;g.ref("images/".concat(t.name)).put(t).on("state_changed",(function(t){var a=Math.round(t.bytesTransferred/t.totalBytes*100);e.setState({progress:a})}),(function(e){console.log(e)}),(function(){g.ref("images").child(t.name).getDownloadURL().then((function(t){e.setState({url:t})}))}))},e.submitHandler=function(t){t.preventDefault(),delete e.state.image,delete e.state.progress,e.props.addItemToState(e.state),e.setState({name:"",url:"",price:0,star:0,description:""})},e.state={name:"",url:"",price:0,star:0,description:"",image:null,progress:0},e}return Object(m.a)(a,[{key:"handleChange",value:function(e){"price"===e.target.name&&e.target.value<0?alert("Please Enter Valid Price Value of product"):"star"===e.target.name&&e.target.value<0?alert("Please Enter Valid Star Value of product"):this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:b},r.a.createElement("p",{style:y},"Add Product"),r.a.createElement("progress",{value:this.state.progress,max:"100",style:{width:"350px",fontSize:"30px"}}),r.a.createElement("label",{htmlFor:"image"},"Image:"),r.a.createElement("div",{style:v.uploadImage},r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"image",onChange:function(t){return e.handleChangeForImage(t)},value:this.state.imgURL})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleImageUpload},"Upload"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{style:C,onSubmit:this.submitHandler},r.a.createElement("label",{htmlFor:"name"},"Item Name:"),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(t){return e.handleChange(t)},value:this.state.name}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"price"},"Price:"),r.a.createElement("input",{type:"number",name:"price",id:"price",onChange:function(t){return e.handleChange(t)},value:this.state.price}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"star"},"Star:"),r.a.createElement("input",{type:"number",name:"star",id:"star",onChange:function(t){return e.handleChange(t)},value:this.state.star}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("textarea",{name:"description",id:"description",onChange:function(t){return e.handleChange(t)},value:this.state.description}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{style:I,type:"submit"},"Submit")))}}]),a}(r.a.Component),v={uploadImage:{margin:"10px 0px",display:"flex"}},b={marginTop:"15vh",display:"flex",flexDirection:"column",justifyContent:"center",AlignItems:"center",backgroundColor:"green",padding:"20px 150px 50px 150px"},y={fontSize:"30px",textAlign:"center",color:"white",padding:"20px",fontWeight:"800"},C={display:"flex",flexDirection:"column",justifyContent:"center",AlignItems:"center"},I={fontSize:"25px",backgroundColor:"blue",color:"red",fontWeight:"500",cursor:"pointer"},S=E,w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onIncreasQuantity=function(t){e.props.onIncreasQuantity(e.props.index)},e.onDecreaseQuantity=function(t){e.props.onDecreaseQuantity(e.props.index)},e.onDeleteProduct=function(t){e.props.onDeleteProduct(e.props.index)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.item,t=e.name,a=e.url,n=e.price,c=e.qty;return r.a.createElement("div",{className:"cart-item"},r.a.createElement("div",{className:"left-block"},r.a.createElement("img",{style:D.image,src:a,alt:"product-pick"})),r.a.createElement("div",{className:"right-block"},r.a.createElement("div",{style:{fontSize:25}},t),r.a.createElement("div",{style:{color:"#777"}},"RS. ",n),r.a.createElement("div",{style:{color:"#777"}},"Qty. ",c),r.a.createElement("div",{className:"cart-item-actions"},r.a.createElement("img",{alt:"Increase",className:"action-icons",src:"https://image.flaticon.com/icons/svg/659/659893.svg",onClick:this.onIncreasQuantity}),r.a.createElement("img",{alt:"Decrease",className:"action-icons",src:"https://image.flaticon.com/icons/svg/659/659892.svg",onClick:this.onDecreaseQuantity}),r.a.createElement("img",{alt:"Delete",className:"action-icons",src:"https://image.flaticon.com/icons/svg/1345/1345823.svg",onClick:this.onDeleteProduct}))))}}]),a}(r.a.Component),D={image:{height:110,width:110,borderRadius:4,background:"#ccc"}},k=w,x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isEditing:!1},e.toggleEditing=function(){e.setState({isEditing:!e.state.isEditing})},e.deleteItem=function(){e.props.deleteItemFromState(e.props.index)},e.addItemToCard=function(){e.props.addItemToCart(e.props.index)},e.editItemSubmitHandler=function(t){if(t.preventDefault(),e.newPrice.value<0||e.newStar.value<0)alert("please enter valid positive entries for price or star");else{var a={};a.newName=e.newName.value,a.newPrice=e.newPrice.value,a.newStar=e.newStar.value,a.newDescription=e.newDescription.value,e.props.editItemFromState(e.props.index,a),e.toggleEditing()}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.item,a=t.name,n=t.url,c=t.price,i=t.star,o=t.description;return this.state.isEditing?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"item",onSubmit:this.editItemSubmitHandler},r.a.createElement("div",{className:"item-image"},r.a.createElement("img",{src:n,alt:"item-pic"})),r.a.createElement("div",{className:"name-rs-star"},r.a.createElement("input",{className:"name",defaultValue:a,ref:function(t){e.newName=t}}),r.a.createElement("input",{className:"name",defaultValue:c,ref:function(t){e.newPrice=t}}),r.a.createElement("input",{className:"name",defaultValue:i,ref:function(t){e.newStar=t}})),r.a.createElement("div",{className:"description"},r.a.createElement("textarea",{className:"item-description",defaultValue:o,ref:function(t){e.newDescription=t}}),r.a.createElement("div",{className:"edit-delete-button"},r.a.createElement("button",{type:"submit"},"Save"),r.a.createElement("button",{onClick:this.toggleEditing},"Cancel"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"item-image"},r.a.createElement("img",{src:n,alt:"item-pic"})),r.a.createElement("div",{className:"name-rs-star"},r.a.createElement("h3",{className:"name"}," ",a," "),r.a.createElement("p",{className:"name"}," Rs.",c," "),r.a.createElement("p",{className:"name"}," Star: ",i," ")),r.a.createElement("div",{className:"description"},r.a.createElement("h4",{className:"item-description"}," ",o," "),r.a.createElement("div",{className:"edit-delete-button"},r.a.createElement("img",{alt:"Delete",className:"action-icons",src:"https://www.flaticon.com/premium-icon/icons/svg/2397/2397538.svg",onClick:this.addItemToCard}),r.a.createElement("img",{alt:"Delete",className:"action-icons",src:"https://www.flaticon.com/svg/static/icons/svg/2946/2946209.svg",onClick:this.toggleEditing}),r.a.createElement("img",{alt:"Delete",className:"action-icons",src:"https://image.flaticon.com/icons/svg/1345/1345823.svg",onClick:this.deleteItem})))))}}]),a}(r.a.Component),N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.getItemCount,a=e.getTotalMRP,n=e.callShowItems,c=e.callAddItem,i=e.callShowCart;return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/rks107/ecommerce-react-app.git",target:"_blank"},"GitHub Link")),r.a.createElement("div",{onClick:n,style:{cursor:"pointer"}},"Products"),r.a.createElement("div",{onClick:c,style:{cursor:"pointer"}}," ","add a product"," "),r.a.createElement("div",{onClick:i,style:O.cartIconContainer},r.a.createElement("img",{style:O.cartIcon,src:"https://image.flaticon.com/icons/svg/833/833400.svg",alt:"cart-icon"}),r.a.createElement("span",{style:O.cartCount}," ",t," ")),r.a.createElement("div",null,"Total MRP: ",a))}}]),a}(r.a.Component),O={nav:{height:70,background:"#4267b2",display:"flex",justifyContent:"flex-end",alignItems:"center"},cartIcon:{height:32,marginRight:20},cartIconContainer:{position:"relative",cursor:"pointer",display:"flex",justifyContent:"space-around",alignItems:"center"},cartCount:{background:"yellow",borderRadius:"50%",padding:"4px 8px",position:"absolute",color:"red"}},P=N,j={products:[],cardProducts:[]};var T=Object(o.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCT":case"ASS_ORDER":case"DES_ORDER":return Object(l.a)(Object(l.a)({},e),{},{products:t.products});default:return e}}));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,{store:T})),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b76a1ea0.chunk.js.map